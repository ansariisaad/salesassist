<div class="w-full overflow-hidden">
  <div class="mt-20">
    <div class="container mx-auto p-6 bg-gray-50 rounded-lg shadow-md">
      <!-- Dropdown to select number of users -->
      <div class="mb-6 flex items-center space-x-4">
        <label for="row-count" class="text-lg font-semibold text-gray-700">
          Select number of users:
        </label>
        <select
          id="row-count"
          [(ngModel)]="selectedRowCount"
          (change)="updateDisplayedUsers()"
          class="bg-white border border-gray-300 pr-10 rounded-lg p-2 focus:ring-2 focus:ring-blue-500 focus:outline-none"
        >
          <option *ngFor="let option of rowOptions" [value]="option">
            {{ option }}
          </option>
        </select>
      </div>

      <!-- Table to display the users -->
      <div class="overflow-x-auto bg-white rounded-lg shadow-md">
        <table class="min-w-full table-auto">
          <thead class="bg-gray-200 text-gray-700">
            <tr>
              <th class="py-3 px-4 text-left">Name</th>
              <th class="py-3 px-4 text-left">Position</th>
              <th class="py-3 px-4 text-left">E-mail</th>
              <th class="py-3 px-4 text-left">Dist Code</th>
              <th class="py-3 px-4 text-left">Branch Name</th>
              <th class="py-3 px-4 text-left">Pincode</th>
            </tr>
          </thead>
          <tbody>
            <!-- Use isLoading to manage loading state -->
            <tr
              *ngFor="let user of displayedUsers"
              class="border-b hover:bg-gray-100 transition-colors"
            >
              <!-- Name -->
              <td class="py-3 px-4">
                <ng-container *ngIf="!isLoading; else loadingName">
                  {{ user.dist_name }}
                </ng-container>
                <ng-template #loadingName>
                  <div class="h-4 bg-gray-300 rounded w-24 animate-pulse"></div>
                </ng-template>
              </td>
              <!-- Position -->
              <td class="py-3 px-4">
                <ng-container *ngIf="!isLoading; else loadingPosition">
                  {{ user.dist_role }}
                </ng-container>
                <ng-template #loadingPosition>
                  <div class="h-4 bg-gray-300 rounded w-24 animate-pulse"></div>
                </ng-template>
              </td>
              <!-- Email -->
              <td class="py-3 px-4">
                <ng-container *ngIf="!isLoading; else loadingEmail">
                  {{ user.dist_email }}
                </ng-container>
                <ng-template #loadingEmail>
                  <div class="h-4 bg-gray-300 rounded w-36 animate-pulse"></div>
                </ng-template>
              </td>
              <!-- Dist Code -->
              <td class="py-3 px-4">
                <ng-container *ngIf="!isLoading; else loadingDistCode">
                  {{ user.d_code }}
                </ng-container>
                <ng-template #loadingDistCode>
                  <div class="h-4 bg-gray-300 rounded w-12 animate-pulse"></div>
                </ng-template>
              </td>
              <!-- Branch Name -->
              <td class="py-3 px-4">
                <ng-container *ngIf="!isLoading; else loadingBranchName">
                  {{ user.branch_name }}
                </ng-container>
                <ng-template #loadingBranchName>
                  <div class="h-4 bg-gray-300 rounded w-28 animate-pulse"></div>
                </ng-template>
              </td>
              <!-- Pincode -->
              <td class="py-3 px-4">
                <ng-container *ngIf="!isLoading; else loadingPincode">
                  {{ user.pincode }}
                </ng-container>
                <ng-template #loadingPincode>
                  <div class="h-4 bg-gray-300 rounded w-16 animate-pulse"></div>
                </ng-template>
              </td>
            </tr>
            <!-- <tr *ngIf="isLoading"></tr> -->
          </tbody>
        </table>
        <div  *ngIf="isLoading" class="w-full flex items-center justify-center custom-spinner">
          <mat-progress-spinner mode="indeterminate" class="custom-spinner">
          </mat-progress-spinner>
        </div>
      </div>
    </div>
  </div>
</div>
